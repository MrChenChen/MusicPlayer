<Window x:Class="MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:ed="http://schemas.microsoft.com/expression/2010/drawing"
        xmlns:local="clr-namespace:MyMusicWPF"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        x:Name="MainWindow"
        Title="我的音乐播放器"
        Width="725"
        Height="510"
        MinWidth="725"
        MinHeight="510"
        Icon="mymusic.ico"
        ResizeMode="CanResizeWithGrip"
        SnapsToDevicePixels="True"
        WindowStartupLocation="CenterScreen"
        WindowState="Minimized"
        mc:Ignorable="d">

    <Window.Resources>

        <Style x:Key="ListItemToolTipTextTitleBlock" TargetType="{x:Type TextBlock}">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" />
                </Setter.Value>
            </Setter>
            <Setter Property="TextTrimming" Value="WordEllipsis" />
        </Style>

        <Style x:Key="ListItemToolTipTextBlock" TargetType="{x:Type TextBlock}">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Opacity="1" />
                </Setter.Value>
            </Setter>
            <Setter Property="TextTrimming" Value="WordEllipsis" />

        </Style>

        <Style x:Key="MainSongInfoGrid1" TargetType="{x:Type TextBlock}">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Opacity="0.5" ShadowDepth="1" />
                </Setter.Value>
            </Setter>
            <Setter Property="TextTrimming" Value="WordEllipsis" />
            <Setter Property="TextAlignment" Value="Right" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <Style x:Key="MainSongInfoGrid2" TargetType="{x:Type TextBlock}">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Opacity="0.5" ShadowDepth="1" />
                </Setter.Value>
            </Setter>
            <Setter Property="TextTrimming" Value="WordEllipsis" />
            <Setter Property="TextAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <Style TargetType="{x:Type Button}">
            <Setter Property="ToolTipService.ShowDuration" Value="20000" />
        </Style>

        <ControlTemplate x:Key="btn_min" TargetType="{x:Type Button}">
            <Grid>
                <Border x:Name="border0"
                        Background="{DynamicResource MainColorBrush}"
                        Opacity="0" />
                <Border x:Name="btn_min"
                        Width="35"
                        Background="Transparent">
                    <Rectangle Width="13"
                               Height="2"
                               Margin="8,22,8,6"
                               Fill="#FF575757" />
                </Border>
            </Grid>
            <ControlTemplate.Triggers>

                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="0"
                                                 Storyboard.TargetName="border0"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="1" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="1"
                                                 Storyboard.TargetName="border0"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter TargetName="btn_min" Property="Background" Value="{DynamicResource MainColorBrush}" />
                    <Setter TargetName="btn_min" Property="Opacity" Value="0.5" />
                </Trigger>

            </ControlTemplate.Triggers>
        </ControlTemplate>

        <DropShadowEffect x:Key="closeeffect"
                          BlurRadius="5"
                          Opacity="1"
                          ShadowDepth="0"
                          Color="{DynamicResource MainColor}" />

        <ControlTemplate x:Key="btn_settingControlTemplate" TargetType="{x:Type ToggleButton}">
            <Grid Effect="{StaticResource closeeffect}">
                <Border x:Name="border0"
                        Background="{DynamicResource MainColorBrush}"
                        Opacity="0" />
                <Border x:Name="border1"
                        Background="{DynamicResource MainColorBrush}"
                        Opacity="0" />
                <Border x:Name="border_setting"
                        Width="30"
                        Background="Transparent">
                    <Grid Margin="0">
                        <Line Stroke="#575757"
                              StrokeThickness="2"
                              X1="7"
                              X2="23"
                              Y1="12"
                              Y2="12" />
                        <Line Stroke="#575757"
                              StrokeThickness="2"
                              X1="7"
                              X2="23"
                              Y1="17.5"
                              Y2="17.5" />
                        <Line Stroke="#575757"
                              StrokeThickness="2"
                              X1="7"
                              X2="23"
                              Y1="23"
                              Y2="23" />
                    </Grid>
                </Border>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsChecked" Value="true">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="0"
                                                 Storyboard.TargetName="border1"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0.7" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="0.7"
                                                 Storyboard.TargetName="border1"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="true">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="0.7"
                                                 Storyboard.TargetName="border0"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="1" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="1"
                                                 Storyboard.TargetName="border0"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>

            </ControlTemplate.Triggers>
        </ControlTemplate>

        <Style x:Key="VolFlashProgressStyle" TargetType="{x:Type ProgressBar}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ProgressBar}">
                        <Grid>
                            <!--  This Border is the track. It must be named PART_Track  -->
                            <Border x:Name="PART_Track"
                                    Background="Transparent"
                                    CornerRadius="3" />
                            <!--  This Border shows progress. It must be named PART_Indicator for the control to function  -->
                            <Border x:Name="PART_Indicator"
                                    HorizontalAlignment="Left"
                                    Background="{DynamicResource MainColorBrush}"
                                    CornerRadius="3"
                                    Opacity="0.7" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="TitleProgressStyle" TargetType="{x:Type ProgressBar}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ProgressBar}">
                        <Grid Opacity="0.5">
                            <!--  This Border is the track. It must be named PART_Track  -->
                            <Border x:Name="PART_Track" Background="Transparent" />
                            <!--  This Border shows progress. It must be named PART_Indicator for the control to function  -->
                            <Border x:Name="PART_Indicator"
                                    HorizontalAlignment="Left"
                                    Background="{DynamicResource MainColorBrush}"
                                    Opacity="0.4" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <ControlTemplate x:Key="btn_max" TargetType="{x:Type Button}">
            <Grid>

                <Border x:Name="border0"
                        Background="{DynamicResource MainColorBrush}"
                        Opacity="0" />
                <Border x:Name="btn_max"
                        Width="35"
                        Background="Transparent">
                    <Rectangle Width="13"
                               Height="13"
                               Margin="11,10,11,5"
                               Stroke="#FF575757"
                               StrokeThickness="2" />
                </Border>
            </Grid>
            <ControlTemplate.Triggers>

                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="0"
                                                 Storyboard.TargetName="border0"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="1" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="1"
                                                 Storyboard.TargetName="border0"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>

                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter TargetName="btn_max" Property="Background" Value="{DynamicResource MainColorBrush}" />
                    <Setter TargetName="btn_max" Property="Opacity" Value="0.5" />
                </Trigger>

            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="btn_close" TargetType="{x:Type Button}">

            <Border x:Name="btn_close"
                    Width="35"
                    Background="Transparent">
                <Grid>
                    <Line Stroke="#FF575757"
                          StrokeThickness="2"
                          X1="12"
                          X2="24"
                          Y1="11"
                          Y2="23" />
                    <Line Stroke="#FF575757"
                          StrokeThickness="2"
                          X1="24"
                          X2="12"
                          Y1="11"
                          Y2="23" />
                </Grid>
            </Border>
            <ControlTemplate.Triggers>

                <Trigger SourceName="btn_close" Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Duration="0:0:0"
                                                Storyboard.TargetName="btn_close"
                                                Storyboard.TargetProperty="Background.Color"
                                                To="#e04343" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Duration="0:0:0"
                                                From="#e04343"
                                                Storyboard.TargetName="btn_close"
                                                Storyboard.TargetProperty="Background.Color" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                    <!--<Setter Property="Background" Value="#e04343" TargetName="btn_close" />-->
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter TargetName="btn_close" Property="Background" Value="#c75050" />
                </Trigger>

            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="SearchTextBoxControlTemplate">
            <Grid>
                <Border Name="border1"
                        Background="Transparent"
                        BorderBrush="{DynamicResource MainColorBrush}"
                        BorderThickness="0"
                        ClipToBounds="True"
                        CornerRadius="1"
                        Opacity="0.4">
                    <Line Name="underline"
                          VerticalAlignment="Bottom"
                          Stroke="{DynamicResource MainColorBrush}"
                          X1="4"
                          X2="200" />
                </Border>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="22" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="22" />
                    </Grid.ColumnDefinitions>

                    <Grid Name="searchpath"
                          Grid.Column="0"
                          Width="22"
                          Opacity="0.5">
                        <Ellipse Name="Ellipse"
                                 Width="Auto"
                                 Height="12"
                                 Margin="3,3,7,0"
                                 HorizontalAlignment="Stretch"
                                 VerticalAlignment="Top"
                                 Stroke="{DynamicResource MainColorBrush}" />
                        <Line Name="Line"
                              Stroke="{DynamicResource MainColorBrush}"
                              X1="13"
                              X2="18"
                              Y1="13"
                              Y2="18" />
                    </Grid>
                    <ScrollViewer x:Name="PART_ContentHost"
                                  Grid.Column="1"
                                  Margin="2,0,2,0"
                                  SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                    <Grid Grid.Column="2"
                          Width="22"
                          HorizontalAlignment="Right">
                        <Border Width="12"
                                Height="12"
                                Margin="3,6,1,4">
                            <Grid Name="searchtextboxclosebutton"
                                  Background="Transparent"
                                  MouseLeftButtonUp="searchtextboxclosebutton_MouseLeftButtonUp"
                                  Opacity="0">
                                <Line Name="line1"
                                      Stroke="{DynamicResource MainColorBrush}"
                                      StrokeThickness="1"
                                      X2="10"
                                      Y2="10" />
                                <Line Name="line2"
                                      Stroke="{DynamicResource MainColorBrush}"
                                      X1="10"
                                      Y2="10" />
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>

            </Grid>

            <ControlTemplate.Triggers>

                <Trigger Property="IsMouseOver" Value="true">
                    <Setter TargetName="Ellipse" Property="StrokeThickness" Value="2" />
                    <Setter TargetName="Line" Property="StrokeThickness" Value="2" />
                    <Setter TargetName="Line" Property="Opacity" Value="1" />
                    <Setter TargetName="underline" Property="Opacity" Value="1" />
                    <Setter TargetName="border1" Property="Opacity" Value="0.7" />
                    <Setter TargetName="searchtextboxclosebutton" Property="Opacity" Value="0.7" />
                    <Setter TargetName="line1" Property="StrokeThickness" Value="2" />
                    <Setter TargetName="line2" Property="StrokeThickness" Value="2" />
                </Trigger>
                <Trigger Property="IsFocused" Value="true">
                    <!--<Setter TargetName="border0" Property="DropShadowEffect.Opacity" Value="1"/>-->
                    <Setter TargetName="border1" Property="Opacity" Value="1" />
                    <Setter TargetName="searchpath" Property="Opacity" Value="1" />
                    <Setter TargetName="searchtextboxclosebutton" Property="Opacity" Value="1" />
                    <!--<Setter TargetName="searchpopup" Property="IsOpen" Value="true"/>-->
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <!--  Simple Separator - This template is used for a Separator in a menu  -->
        <Style x:Key="SimpleSeparator" TargetType="{x:Type Separator}">
            <Setter Property="Height" Value="6" />
            <Setter Property="Focusable" Value="false" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Separator">
                        <Border Height="6">
                            <Grid Margin="4,2,4,2">
                                <Border Background="{DynamicResource MainColorBrush}"
                                        BorderBrush="{DynamicResource MainColorBrush}"
                                        BorderThickness="1"
                                        Opacity="0.5" />
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="{x:Type ContextMenu}">

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Border>
                            <Grid Margin="5" Background="Transparent">
                                <Border Background="White"
                                        BorderBrush="{DynamicResource MainColorBrush}"
                                        BorderThickness="1">
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="10"
                                                          ShadowDepth="0"
                                                          Color="{DynamicResource MainColor}" />
                                    </Border.Effect>
                                </Border>
                                <Border Margin="4" Background="White">
                                    <StackPanel>
                                        <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Cycle" />
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsOpen" Value="true">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0.1"
                                                 From="0"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="1" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                </Trigger>
            </Style.Triggers>

        </Style>

        <Style TargetType="{x:Type MenuItem}">
            <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type MenuItem}">
                        <Border x:Name="MainBorder"
                                Height="auto"
                                MinHeight="25"
                                Background="Transparent"
                                CornerRadius="1">
                            <Grid>

                                <!--
                                    The Grid is used to hold together columns for an Icon, Content, Glyph checkmark and Arrow to show the next level
                                    Size sharing is used in Grid so that the Icon, Content, Arrow for each MenuItem align together
                                -->
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIconColumnGroup" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIGTColumnGroup" />
                                    <ColumnDefinition Width="14" />
                                </Grid.ColumnDefinitions>

                                <!--  图标ContentPresenter to show an Icon if needed  -->
                                <ContentPresenter x:Name="Icon"
                                                  VerticalAlignment="Center"
                                                  ContentSource="Icon" />

                                <!--  选择 勾 Glyph is a checkmark if needed for a checkable menu  -->
                                <Grid x:Name="GlyphPanel"
                                      Margin="4,0,6,0"
                                      VerticalAlignment="Center"
                                      Visibility="Hidden">
                                    <Path x:Name="GlyphPanelpath"
                                          VerticalAlignment="Center"
                                          Data="M0,2 L0,4.8 L2.5,7.4 L7.1,2.8 L7.1,0 L2.5,4.6 z"
                                          Fill="{DynamicResource MainColorBrush}"
                                          FlowDirection="LeftToRight" />
                                </Grid>

                                <!--  子菜单The Popup is the body of the menu which expands down or across depending on the level of the item  -->
                                <Popup x:Name="SubMenuPopup"
                                       AllowsTransparency="true"
                                       Focusable="false"
                                       IsOpen="{Binding IsSubmenuOpen,
                                                        RelativeSource={RelativeSource TemplatedParent}}"
                                       Placement="Right"
                                       PopupAnimation="Fade"
                                       VerticalOffset="-3">
                                    <Border>
                                        <Grid x:Name="SubMenu"
                                              Margin="5"
                                              Background="Transparent">
                                            <Border x:Name="SubMenuBorder"
                                                    Background="White"
                                                    BorderBrush="{DynamicResource MainColorBrush}"
                                                    BorderThickness="1">
                                                <Border.Effect>
                                                    <DropShadowEffect BlurRadius="10"
                                                                      ShadowDepth="0"
                                                                      Color="{DynamicResource MainColor}" />
                                                </Border.Effect>
                                            </Border>
                                            <!--  StackPanel holds children of the menu. This is set bu IsItemsHost=True  -->
                                            <Border Margin="4" Background="White">

                                                <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Cycle" />
                                            </Border>
                                        </Grid>
                                    </Border>
                                </Popup>

                                <!--  文本Content for the menu text etc  -->
                                <ContentPresenter x:Name="HeaderHost"
                                                  Grid.Column="1"
                                                  Margin="{TemplateBinding Padding}"
                                                  VerticalAlignment="Center"
                                                  ContentSource="Header"
                                                  RecognizesAccessKey="True"
                                                  TextElement.FontSize="12" />

                                <!--  箭头Arrow drawn path which points to the next level of the menu  -->
                                <Grid x:Name="ArrowPanel"
                                      Grid.Column="3"
                                      Margin="4,0,6,0"
                                      VerticalAlignment="Center">
                                    <Path x:Name="ArrowPanelPath"
                                          VerticalAlignment="Center"
                                          Data="M0,0 L0,8 L4,4 z"
                                          Fill="{TemplateBinding Foreground}" />
                                </Grid>

                            </Grid>
                        </Border>

                        <!--  These triggers re-configure the four arrangements of MenuItem to show different levels of menu via Role  -->
                        <ControlTemplate.Triggers>

                            <!--  Role = TopLevelHeader : this is the root menu item in a menu; the Popup expands down  -->
                            <Trigger Property="Role" Value="TopLevelHeader">
                                <Setter Property="Margin" Value="0,1,0,1" />
                                <Setter Property="Padding" Value="6,3,6,3" />
                                <Setter Property="Grid.IsSharedSizeScope" Value="true" />
                                <Setter TargetName="SubMenuPopup" Property="Placement" Value="Bottom" />
                                <Setter TargetName="ArrowPanel" Property="Visibility" Value="Collapsed" />
                            </Trigger>

                            <!--  Role = TopLevelItem :  this is a child menu item from the top level without any child items  -->
                            <Trigger Property="Role" Value="TopLevelItem">
                                <Setter Property="Margin" Value="0,1,0,1" />
                                <Setter Property="Padding" Value="6,3,6,3" />
                                <Setter TargetName="ArrowPanel" Property="Visibility" Value="Collapsed" />
                            </Trigger>

                            <!--  Role = SubMenuHeader : this is a child menu item which does not have children  -->
                            <Trigger Property="Role" Value="SubmenuHeader">
                                <Setter Property="DockPanel.Dock" Value="Top" />
                                <Setter Property="Padding" Value="0,2,0,2" />
                                <Setter Property="Grid.IsSharedSizeScope" Value="true" />
                            </Trigger>

                            <!--  Role = SubMenuItem : this is a child menu item which has children  -->
                            <Trigger Property="Role" Value="SubmenuItem">
                                <Setter Property="DockPanel.Dock" Value="Top" />
                                <Setter Property="Padding" Value="0,2,0,2" />
                                <Setter TargetName="ArrowPanel" Property="Visibility" Value="Collapsed" />
                            </Trigger>
                            <Trigger Property="IsSuspendingPopupAnimation" Value="true">
                                <Setter TargetName="SubMenuPopup" Property="PopupAnimation" Value="None" />
                            </Trigger>

                            <!--  If no Icon is present the we collapse the Icon Content  -->
                            <Trigger Property="Icon" Value="{x:Null}">
                                <Setter TargetName="Icon" Property="Visibility" Value="Collapsed" />
                            </Trigger>

                            <!--  The GlyphPanel contains the CheckMark  -->
                            <Trigger Property="IsChecked" Value="true">
                                <Setter TargetName="GlyphPanel" Property="Visibility" Value="Visible" />
                                <Setter TargetName="Icon" Property="Visibility" Value="Collapsed" />
                            </Trigger>


                            <Trigger SourceName="SubMenuPopup" Property="AllowsTransparency" Value="true">
                                <Setter TargetName="SubMenu" Property="Margin" Value="0,0,3,3" />
                            </Trigger>

                            <!--<Trigger Property="IsHighlighted" Value="true">
                                <Setter Property="Background" Value="{DynamicResource MainColorBrush }" TargetName="Border"/>

                            </Trigger>-->
                            <Trigger SourceName="MainBorder" Property="IsMouseOver" Value="true">
                                <Setter TargetName="MainBorder" Property="Background" Value="{DynamicResource MainColorBrush}" />
                                <Setter TargetName="GlyphPanelpath" Property="Fill" Value="white" />

                            </Trigger>


                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                            </Trigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="playbtn" TargetType="{x:Type ToggleButton}">
            <Setter Property="Focusable" Value="False" />
            <Setter Property="Width" Value="25" />
            <Setter Property="Height" Value="25" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="IsTabStop" Value="False" />
            <Setter Property="IsThreeState" Value="False" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Grid Width="{TemplateBinding Width}"
                              Height="{TemplateBinding Height}"
                              Margin="0"
                              Background="Transparent">

                            <Path x:Name="play"
                                  Margin="6,3,0,3"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch"
                                  Fill="Transparent"
                                  Opacity="1"
                                  Stretch="Uniform"
                                  Stroke="{DynamicResource MainColorBrush}"
                                  StrokeThickness="2"
                                  d:LayoutOverrides="Width, Height">
                                <Path.Data>
                                    <GeometryGroup>
                                        <PathGeometry Figures="M -30,-60 V 60 L 60,0 z" />
                                    </GeometryGroup>
                                </Path.Data>
                            </Path>
                            <Path x:Name="next"
                                  Margin="6,3,0,3"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"
                                  d:IsHidden="True"
                                  Fill="Transparent"
                                  Opacity="0"
                                  Stretch="Uniform"
                                  Stroke="{DynamicResource MainColorBrush}"
                                  StrokeThickness="2">
                                <Path.Data>
                                    <GeometryGroup>
                                        <GeometryGroup>
                                            <RectangleGeometry Rect="-40,-60,20,120" />
                                            <RectangleGeometry Rect="20,-60,20,120" />
                                        </GeometryGroup>
                                    </GeometryGroup>
                                </Path.Data>
                            </Path>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="0:0:0.3"
                                                             From="1"
                                                             Storyboard.TargetName="play"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="0" />
                                            <DoubleAnimation Duration="0:0:0.3"
                                                             From="0"
                                                             Storyboard.TargetName="next"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>

                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="0:0:0.3"
                                                             From="1"
                                                             Storyboard.TargetName="next"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="0" />
                                            <DoubleAnimation Duration="0:0:0.3"
                                                             From="0"
                                                             Storyboard.TargetName="play"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>

                            </Trigger>

                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter TargetName="play" Property="Fill" Value="{DynamicResource MainColorBrush}" />
                                <Setter TargetName="next" Property="Fill" Value="{DynamicResource MainColorBrush}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="playbtnBottom" TargetType="{x:Type ToggleButton}">
            <Setter Property="Focusable" Value="False" />
            <Setter Property="Width" Value="35" />
            <Setter Property="Height" Value="35" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="IsTabStop" Value="False" />
            <Setter Property="IsThreeState" Value="False" />
            <Setter Property="Opacity" Value="0.5" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Grid Width="{TemplateBinding Width}"
                              Height="{TemplateBinding Height}"
                              Margin="0"
                              Background="Transparent">
                            <Path x:Name="play"
                                  Margin="6,8,2,7"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch"
                                  Fill="Transparent"
                                  Opacity="1"
                                  Stretch="Uniform"
                                  Stroke="{DynamicResource MainColorBrush}"
                                  StrokeThickness="2"
                                  d:LayoutOverrides="Width, Height">
                                <Path.Data>
                                    <GeometryGroup>
                                        <PathGeometry Figures="M -30,-60 V 60 L 60,0 z" />
                                    </GeometryGroup>
                                </Path.Data>
                            </Path>
                            <Path x:Name="next"
                                  Margin="8,8,8,8"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"
                                  d:IsHidden="True"
                                  Fill="Transparent"
                                  Opacity="0"
                                  Stretch="Uniform"
                                  Stroke="{DynamicResource MainColorBrush}"
                                  StrokeThickness="2">
                                <Path.Data>
                                    <GeometryGroup>
                                        <GeometryGroup>
                                            <RectangleGeometry Rect="-40,-60,20,120" />
                                            <RectangleGeometry Rect="20,-60,20,120" />
                                        </GeometryGroup>
                                    </GeometryGroup>
                                </Path.Data>
                            </Path>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="0:0:0.5"
                                                             From="1"
                                                             Storyboard.TargetName="play"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="0" />
                                            <DoubleAnimation Duration="0:0:0.5"
                                                             From="0"
                                                             Storyboard.TargetName="next"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>

                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="0:0:0.5"
                                                             From="1"
                                                             Storyboard.TargetName="next"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="0" />
                                            <DoubleAnimation Duration="0:0:0.5"
                                                             From="0"
                                                             Storyboard.TargetName="play"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>

                            </Trigger>

                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter TargetName="play" Property="Fill" Value="{DynamicResource MainColorBrush}" />
                                <Setter TargetName="next" Property="Fill" Value="{DynamicResource MainColorBrush}" />
                                <Setter Property="Opacity" Value="1" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


        <Style x:Key="nextbtn" TargetType="{x:Type Button}">
            <Setter Property="Width" Value="25" />
            <Setter Property="Height" Value="25" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="IsTabStop" Value="False" />
            <Setter Property="Focusable" Value="False" />
            <Setter Property="Template">

                <Setter.Value>

                    <ControlTemplate TargetType="{x:Type Button}">
                        <Grid Width="{TemplateBinding Width}"
                              Height="{TemplateBinding Height}"
                              Margin="0"
                              Background="Transparent">

                            <Path x:Name="next"
                                  Margin="0,5,0,5"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch"
                                  Fill="Transparent"
                                  Opacity="1"
                                  Stretch="Uniform"
                                  Stroke="{DynamicResource MainColorBrush}"
                                  StrokeThickness="2">
                                <Path.Data>
                                    <GeometryGroup>
                                        <GeometryGroup.Transform>
                                            <ScaleTransform ScaleX="0.7" ScaleY="0.5" />
                                        </GeometryGroup.Transform>
                                        <PathGeometry Figures="M -30,-60 V 60 L 20,0 z">
                                            <PathGeometry.Transform>
                                                <TranslateTransform X="60" />
                                            </PathGeometry.Transform>
                                        </PathGeometry>
                                        <PathGeometry Figures="M -30,-60 V 60 L 20,0 z" />
                                    </GeometryGroup>
                                </Path.Data>
                            </Path>

                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter TargetName="next" Property="Fill" Value="{DynamicResource MainColorBrush}" />
                            </Trigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="searchbtn" TargetType="{x:Type ToggleButton}">
            <Setter Property="Focusable" Value="False" />
            <Setter Property="Width" Value="25" />
            <Setter Property="Height" Value="25" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="IsTabStop" Value="False" />
            <Setter Property="IsThreeState" Value="False" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Grid Name="searchmaingrid" Background="Transparent">
                            <Grid.Effect>
                                <DropShadowEffect BlurRadius="5"
                                                  Opacity="1"
                                                  ShadowDepth="0"
                                                  Color="{DynamicResource MainColor}" />
                            </Grid.Effect>
                            <Border x:Name="border0"
                                    Background="{DynamicResource MainColorBrush}"
                                    Opacity="0" />
                            <Border x:Name="border1"
                                    Background="{DynamicResource MainColorBrush}"
                                    Opacity="0" />
                            <Grid Width="{TemplateBinding Width}"
                                  Height="{TemplateBinding Height}"
                                  Margin="1.25,3.748,4.749,3.248"
                                  Background="Transparent">


                                <Path Name="path1"
                                      Margin="6.171,5.333,6.829,5.667"
                                      HorizontalAlignment="Stretch"
                                      VerticalAlignment="Stretch"
                                      Fill="Transparent"
                                      Opacity="1"
                                      Stretch="Uniform"
                                      Stroke="#575757"
                                      StrokeThickness="2">
                                    <Path.Data>
                                        <EllipseGeometry RadiusX="10" RadiusY="10" />
                                    </Path.Data>
                                </Path>
                                <Path Name="path2"
                                      Width="7.004"
                                      Margin="0,14.493,3.326,0.668"
                                      HorizontalAlignment="Right"
                                      Stretch="Fill"
                                      Stroke="#575757"
                                      StrokeThickness="2">
                                    <Path.Data>
                                        <LineGeometry StartPoint="10,13" EndPoint="15,24" />
                                    </Path.Data>
                                </Path>
                            </Grid>

                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="0:0:0"
                                                             From="0.7"
                                                             Storyboard.TargetName="border0"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="0:0:0"
                                                             From="1"
                                                             Storyboard.TargetName="border0"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="0" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="true">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="0:0:0"
                                                             From="0"
                                                             Storyboard.TargetName="border1"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="0.7" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="0:0:0"
                                                             From="0.7"
                                                             Storyboard.TargetName="border1"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="0" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <ControlTemplate x:Key="VolBtnControlTemplate">
            <Grid>

                <Grid Name="volgrid" Background="Transparent">

                    <Grid.Effect>
                        <DropShadowEffect BlurRadius="5"
                                          Opacity="1"
                                          ShadowDepth="0"
                                          Color="{DynamicResource MainColor}" />
                    </Grid.Effect>
                    <Border x:Name="border0"
                            Background="{DynamicResource MainColorBrush}"
                            Opacity="0" />
                    <Border x:Name="border1"
                            Background="{DynamicResource MainColorBrush}"
                            Opacity="0" />
                    <Border>
                        <Grid Margin="0">

                            <Path Width="8.125"
                                  Margin="5.163,10.084,0,4.916"
                                  HorizontalAlignment="Left"
                                  Data="M5,8 L5,20 11,24 11,4 z"
                                  Stretch="Fill"
                                  Stroke="#FF575757"
                                  StrokeThickness="2" />

                            <Path Width="2"
                                  Margin="0,13.25,11.543,7.75"
                                  HorizontalAlignment="Right"
                                  Data="M14,11 L14,22"
                                  Stretch="Fill"
                                  Stroke="#FF575757"
                                  StrokeThickness="2"
                                  Visibility="{Binding ElementName=MusicPlayer,
                                                       Path=Volume,
                                                       Converter={StaticResource volpathopactiy33Converter},
                                                       Mode=OneWay}" />

                            <Path Width="2"
                                  Margin="0,10.084,6.502,4.916"
                                  HorizontalAlignment="Right"
                                  Data="M17,9 L17,24"
                                  Stretch="Fill"
                                  Stroke="#FF575757"
                                  StrokeThickness="2"
                                  Visibility="{Binding ElementName=MusicPlayer,
                                                       Path=Volume,
                                                       Converter={StaticResource volpathopactiy33Converter},
                                                       Mode=OneWay}" />

                            <!--<Path Visibility="{Binding ElementName=MusicPlayer, Path=Volume, Converter={StaticResource volpathopactiy99Converter}, Mode=OneWay }" Data="M20,7 L20,26" HorizontalAlignment="Right" Margin="0,8,6.084,4" Stretch="Fill" Stroke="#FF575757" StrokeThickness="2" Width="2"/>-->

                            <Grid Margin="0" Visibility="{Binding ElementName=MusicPlayer, Path=Volume, Converter={StaticResource volpathVisibility0Converter}, Mode=OneWay}">

                                <Path Width="Auto"
                                      Margin="14.004,9.835,3.996,4.831"
                                      HorizontalAlignment="Stretch"
                                      Data="M28,1.9996667 L17.666667,12.333"
                                      Stretch="Fill"
                                      Stroke="#FF575757"
                                      StrokeThickness="2" />
                                <Path Width="Auto"
                                      Margin="14.004,9.835,3.996,4.831"
                                      HorizontalAlignment="Stretch"
                                      Data="M28,1.9996667 L17.666667,12.333"
                                      RenderTransformOrigin="0.5,0.5"
                                      Stretch="Fill"
                                      Stroke="#FF575757"
                                      StrokeThickness="2">
                                    <Path.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform ScaleX="-1" ScaleY="1" />
                                            <SkewTransform AngleX="0" AngleY="0" />
                                            <RotateTransform Angle="0" />
                                            <TranslateTransform />
                                        </TransformGroup>
                                    </Path.RenderTransform>
                                </Path>

                            </Grid>

                        </Grid>
                    </Border>
                </Grid>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="ToggleButton.IsChecked" Value="true">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="0"
                                                 Storyboard.TargetName="border1"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0.7" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="0.7"
                                                 Storyboard.TargetName="border1"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="true">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="0.7"
                                                 Storyboard.TargetName="border0"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="1" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 From="1"
                                                 Storyboard.TargetName="border0"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <!--  Simple ListBox - This uses SimpleScrollViewer to allow items to be scrolled and SimpleListBoxItem to define the look of each item  -->
        <Style TargetType="{x:Type ListBox}">
            <Setter Property="Background" Value="{DynamicResource WindowBackgroundBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
            <Setter Property="ScrollViewer.CanContentScroll" Value="true" />
            <Setter Property="ScrollViewer.PanningMode" Value="Both" />
            <Setter Property="Stylus.IsFlicksEnabled" Value="False" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBox}">
                        <Border x:Name="Bd">
                            <Grid>
                                <Border BorderBrush="{DynamicResource MainColorBrush}"
                                        BorderThickness="1"
                                        CornerRadius="3"
                                        Padding="1">
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="5"
                                                          ShadowDepth="0"
                                                          Color="{DynamicResource MainColor}" />
                                    </Border.Effect>
                                </Border>

                                <ScrollViewer Margin="5,3"
                                              Focusable="false"
                                              Padding="{TemplateBinding Padding}">
                                    <ItemsPresenter Name="ListBoxItemContextMenu">
                                        <ItemsPresenter.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem Click="MenuItemPlay_Click" Header="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SelectedItem, Converter={StaticResource listboxitemcontextmenu}}" />
                                                <MenuItem Click="MenuItemFindLrc" Header="搜索歌词" />
                                                <MenuItem Click="MenuItemMusicLocation_Click" Header="文件位置" />
                                                <MenuItem Click="MenuItemProperty_Click" Header="文件属性" />
                                                <MenuItem Click="MenuItemReloadList_Click" Header="重新加载" />

                                                <Separator Style="{StaticResource SimpleSeparator}" />
                                                <MenuItem Header="列表排序">
                                                    <MenuItem x:Name="MenuItemSort1"
                                                              Header="按歌曲标题 升序"
                                                              IsCheckable="False"
                                                              PreviewMouseDown="MenuItem_SortClick1" />
                                                    <MenuItem x:Name="MenuItemSort2"
                                                              Header="按歌曲标题 降序"
                                                              IsCheckable="False"
                                                              PreviewMouseDown="MenuItem_SortClick2" />
                                                    <Separator Style="{DynamicResource SimpleSeparator}" />
                                                    <MenuItem x:Name="MenuItemSort3"
                                                              Header="按歌手 升序"
                                                              IsCheckable="False"
                                                              PreviewMouseDown="MenuItem_SortClick3" />
                                                    <MenuItem x:Name="MenuItemSort4"
                                                              Header="按歌手 降序"
                                                              IsCheckable="False"
                                                              PreviewMouseDown="MenuItem_SortClick4" />
                                                </MenuItem>
                                            </ContextMenu>
                                        </ItemsPresenter.ContextMenu>
                                    </ItemsPresenter>
                                </ScrollViewer>
                            </Grid>
                        </Border>

                        <ControlTemplate.Triggers>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsGrouping" Value="true" />
                                    <Condition Property="VirtualizingPanel.IsVirtualizingWhenGrouping" Value="false" />
                                </MultiTrigger.Conditions>
                                <Setter Property="ScrollViewer.CanContentScroll" Value="false" />
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>

        </Style>

        <!--  Simple ListBoxItem - This is used for each Item in a ListBox. The item's content is placed in the ContentPresenter  -->
        <Style TargetType="{x:Type ListBoxItem}">

            <Setter Property="IsTabStop" Value="False" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <Grid x:Name="Grid"
                              Margin="2,1"
                              Background="Transparent"
                              MouseLeftButtonDown="ListBoxItem_MouseLeftButtonDown"
                              ToolTipOpening="Grid_ToolTipOpening"
                              ToolTipService.Placement="Right"
                              ToolTipService.PlacementTarget="{Binding ElementName=Grid}"
                              ToolTipService.ShowDuration="100000">

                            <Grid.ToolTip>
                                <ToolTip>
                                    <ToolTip.Style>
                                        <Style TargetType="{x:Type ToolTip}">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="{x:Type ToolTip}">
                                                        <Grid Width="300" Height="300">
                                                            <Border Background="{DynamicResource ResourceKey=MainColorBrush}" Opacity="0.6">
                                                                <Border.Effect>
                                                                    <BlurEffect Radius="15" />
                                                                </Border.Effect>
                                                            </Border>
                                                            <Border Margin="0"
                                                                    BorderBrush="{DynamicResource ResourceKey=MainColorBrush}"
                                                                    BorderThickness="1">
                                                                <Border.Effect>
                                                                    <DropShadowEffect BlurRadius="10"
                                                                                      ShadowDepth="0"
                                                                                      Color="{DynamicResource ResourceKey=MainColor}" />
                                                                </Border.Effect>
                                                            </Border>

                                                            <ContentPresenter Width="auto"
                                                                              Height="auto"
                                                                              Margin="5"
                                                                              Content="{TemplateBinding Content}" />
                                                        </Grid>

                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ToolTip.Style>
                                    <Grid>
                                        <Image MaxWidth="300"
                                               MaxHeight="300"
                                               Opacity="0.5"
                                               Source="{Binding MusicImage}"
                                               Stretch="UniformToFill">
                                            <Image.BitmapEffect>
                                                <BlurBitmapEffect Radius="0" />
                                            </Image.BitmapEffect>
                                        </Image>
                                        <Grid MinWidth="200"
                                              MinHeight="200"
                                              Margin="5">

                                            <Grid x:Name="MusicDetailTooltip"
                                                  TextBlock.FontSize="13"
                                                  TextBlock.Foreground="White">

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="2.5*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="2*" />
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                    <RowDefinition Height="2*" />
                                                </Grid.RowDefinitions>
                                                <TextBlock Grid.ColumnSpan="2"
                                                           Margin="3,5"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Center"
                                                           FontSize="17"
                                                           FontWeight="Bold"
                                                           Style="{StaticResource ListItemToolTipTextTitleBlock}"
                                                           Text="{Binding MusicTitle}"
                                                           TextAlignment="Center"
                                                           TextWrapping="WrapWithOverflow" />
                                                <TextBlock Grid.Row="1"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="歌手："
                                                           TextAlignment="Right" />
                                                <TextBlock Grid.Row="1"
                                                           Grid.Column="1"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="{Binding MusicAuthors}"
                                                           TextAlignment="Left" />
                                                <TextBlock Grid.Row="2"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="时长："
                                                           TextAlignment="Right" />
                                                <TextBlock Grid.Row="2"
                                                           Grid.Column="1"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="{Binding MusicLength}"
                                                           TextAlignment="Left" />
                                                <TextBlock Grid.Row="3"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="专辑："
                                                           TextAlignment="Right" />
                                                <TextBlock Grid.Row="3"
                                                           Grid.Column="1"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="{Binding MusicAlbum}"
                                                           TextAlignment="Left" />
                                                <TextBlock Grid.Row="4"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="年代："
                                                           TextAlignment="Right" />
                                                <TextBlock Grid.Row="4"
                                                           Grid.Column="1"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="{Binding MusicYear}"
                                                           TextAlignment="Left" />
                                                <TextBlock Grid.Row="5"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="风格："
                                                           TextAlignment="Right" />
                                                <TextBlock Grid.Row="5"
                                                           Grid.Column="1"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="{Binding MusicGenre}"
                                                           TextAlignment="Left" />
                                                <TextBlock Grid.Row="6"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="比特率："
                                                           TextAlignment="Right" />
                                                <TextBlock Grid.Row="6"
                                                           Grid.Column="1"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="{Binding MusicBitrate}"
                                                           TextAlignment="Left" />
                                                <TextBlock Grid.Row="7"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="文件大小："
                                                           TextAlignment="Right" />
                                                <TextBlock Grid.Row="7"
                                                           Grid.Column="1"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="{Binding MusicSize}"
                                                           TextAlignment="Left" />
                                                <TextBlock Grid.Row="8"
                                                           Margin="3,5"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="文件位置："
                                                           TextAlignment="Right" />
                                                <TextBlock Grid.Row="8"
                                                           Grid.Column="1"
                                                           MaxWidth="250"
                                                           Margin="3,5"
                                                           HorizontalAlignment="Left"
                                                           Style="{StaticResource ListItemToolTipTextBlock}"
                                                           Text="{Binding MusicLoc}"
                                                           TextAlignment="Left"
                                                           TextWrapping="Wrap" />

                                            </Grid>

                                        </Grid>
                                    </Grid>
                                </ToolTip>
                            </Grid.ToolTip>

                            <Grid>
                                <Border x:Name="Border1"
                                        MinHeight="26"
                                        Background="{DynamicResource MainColorBrush}"
                                        BorderBrush="Transparent"
                                        BorderThickness="1"
                                        CornerRadius="2"
                                        Opacity="0" />
                            </Grid>
                            <ContentPresenter x:Name="item"
                                              Margin="6,1,1,1"
                                              VerticalAlignment="Center"
                                              TextElement.FontSize="13"
                                              TextElement.Foreground="{DynamicResource MainColorBrush}" />

                        </Grid>
                        <ControlTemplate.Triggers>

                            <!--  Change IsSelected SelectedBackgroundBrush to set the selection color for the items  -->
                            <Trigger Property="IsSelected" Value="true">
                                <!--<Setter Property="Background" Value="{DynamicResource MainColorBrush}" TargetName="Border2"/>-->
                                <Setter TargetName="item" Property="TextElement.Foreground" Value="White" />
                                <Setter TargetName="Border1" Property="Background" Value="{DynamicResource MainColorBrush}" />
                                <Setter Property="TextElement.FontSize" Value="14" />
                                <Setter Property="TextElement.FontWeight" Value="Bold" />
                                <Setter TargetName="Border1" Property="Opacity" Value="1" />
                                <Setter TargetName="Grid" Property="Background" Value="{DynamicResource MainColorBrush}" />
                            </Trigger>

                            <Trigger Property="IsMouseOver" Value="true">
                                <!--<Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="Border1" Storyboard.TargetProperty ="Opacity" From="0" To="0.6" Duration="0:0:0" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="Border1" Storyboard.TargetProperty ="Opacity" From="0.6" To="0" Duration="0:0:0.0" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>-->

                                <Setter TargetName="Border1" Property="Opacity" Value="0.6" />
                                <!--<Setter Property="Opacity" TargetName="Border1" Value="0.6"/>-->
                                <Setter TargetName="item" Property="TextElement.Foreground" Value="White" />
                                <Setter Property="TextElement.FontSize" Value="14" />

                            </Trigger>


                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>

        </Style>


    </Window.Resources>

    <Window.TaskbarItemInfo>
        <TaskbarItemInfo x:Name="taskbar"
                         Description="{Binding ElementName=MainWindow,
                                               Path=Title}"
                         ProgressState="Normal">

            <TaskbarItemInfo.ThumbButtonInfos>
                <ThumbButtonInfo x:Name="TaskBarStopBtn"
                                 Click="TaskBarStopBtn_Click"
                                 Description="停止"
                                 ImageSource="Resources/stop.ico" />
                <ThumbButtonInfo x:Name="TaskBarPreviousBtn"
                                 Click="TaskBarPreviousBtn_Click"
                                 Description="上一首"
                                 ImageSource="Resources/previous.ico" />
                <ThumbButtonInfo x:Name="TaskBarPlayBtn"
                                 Click="MusicPlayButton_Click"
                                 Description="开始播放"
                                 ImageSource="Resources/play.ico" />
                <ThumbButtonInfo x:Name="TaskBarNextBtn"
                                 Click="MusicnextButton_Click"
                                 Description="下一首"
                                 ImageSource="Resources/next.ico" />
                <ThumbButtonInfo x:Name="TaskBarExitBtn"
                                 Click="CloseWindowCommand_Executed"
                                 Description="退出"
                                 ImageSource="Resources/x.ico" />
            </TaskbarItemInfo.ThumbButtonInfos>
        </TaskbarItemInfo>
    </Window.TaskbarItemInfo>

    <Window.CommandBindings>
        <CommandBinding Command="SystemCommands.MinimizeWindowCommand" Executed="MinimizeWindowCommand_Executed" />
        <CommandBinding Command="SystemCommands.MaximizeWindowCommand" Executed="MaximizeWindowCommand_Executed" />
        <CommandBinding Command="SystemCommands.CloseWindowCommand" Executed="CloseWindowCommand_Executed" />

    </Window.CommandBindings>

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="30" ResizeBorderThickness="5" />
    </WindowChrome.WindowChrome>

    <Window.Template>
        <ControlTemplate TargetType="{x:Type Window}">
            <Border Margin="0">
                <Border Name="MainBorder"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{DynamicResource ResourceKey=MainColorBrush}"
                        BorderThickness="1"
                        CornerRadius="0"
                        Opacity="1">
                    <Border.Effect>
                        <DropShadowEffect x:Name="MainBorderEffect"
                                          BlurRadius="10"
                                          Opacity="1"
                                          ShadowDepth="0"
                                          Color="{DynamicResource ResourceKey=MainColor}" />
                    </Border.Effect>
                    <AdornerDecorator>
                        <Grid>
                            <!--  背景图片  -->

                            <Border Margin="0" Opacity="{Binding Value, ElementName=Backgopacity}">
                                <Border.Effect>
                                    <BlurEffect Radius="{Binding Value, ElementName=Backgeffect}" />
                                </Border.Effect>

                                <Image Name="m_BackgroundImage"
                                       Source="Frozen.jpg"
                                       Stretch="UniformToFill" />
                            </Border>

                            <!--  背景动画  -->


                            <!--  主窗口控件布局 标题栏 设计  -->
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <!--  播放音乐时 随音乐 跳动  的进度条  -->

                                <Grid Name="TitleBar_Grid"
                                      Grid.Row="0"
                                      Background="Transparent"
                                      WindowChrome.IsHitTestVisibleInChrome="True">

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="213*" />
                                        <ColumnDefinition Width="auto" MinWidth="30" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="135" />

                                    </Grid.ColumnDefinitions>

                                    <!--  左上角音乐图标  -->
                                    <Grid Name="MusicIcon_Grid"
                                          Background="Transparent"
                                          MouseDown="Title_Move">
                                        <Grid.ContextMenu>
                                            <ContextMenu Name="MusicIconContextMenu" FocusManager.IsFocusScope="True">
                                                <MenuItem Name="TitleContextMenu_Play"
                                                          Click="MusicContextMenu_Play_Click"
                                                          Header="播放" />
                                                <MenuItem Click="TaskBarPreviousBtn_Click" Header="上一首" />
                                                <MenuItem Click="MusicnextButton_Click" Header="下一首" />
                                                <MenuItem Click="RndPlayMusic_Click" Header="随机播放" />
                                                <Separator Style="{DynamicResource SimpleSeparator}" />
                                                <MenuItem Click="显示歌词_Click"
                                                          Header="显示歌词"
                                                          IsCheckable="True"
                                                          IsChecked="True" />
                                                <Separator Style="{DynamicResource SimpleSeparator}" />
                                                <MenuItem Click="MenuItemReloadList_Click" Header="重新加载" />
                                                <MenuItem Click="MinimizeWindowCommand_Executed" Header="最小化" />
                                                <MenuItem Click="MaximizeWindowCommand_Executed" Header="最大化/还原" />
                                                <MenuItem Click="CloseWindowCommand_Executed" Header="关闭" />

                                            </ContextMenu>
                                        </Grid.ContextMenu>
                                        <Border Margin="2.667,3.333,0,0" RenderTransformOrigin="0.5,0.5">
                                            <!--  左上角音乐图标  -->
                                            <Path x:Name="pathmusic"
                                                  Width="Auto"
                                                  Height="Auto"
                                                  Margin="2.272,1.417,2.632,2.019"
                                                  HorizontalAlignment="Stretch"
                                                  VerticalAlignment="Stretch"
                                                  Data="M6.1963643,7.374972 L22.484045,6.0221839 C22.484045,11.438851 23.054175,20.463659 22.624829,23.250459 22.374401,24.875942 21.120204,27.001436 18.734752,27.125633 17.745014,26.970185 16.227252,26.721479 15.47721,25.096404 15.06052,23.304655 15.450989,20.970907 18.243048,20.970303 L17.813179,12.042091 11.5,12.500033 C11.555556,16.611166 12.249374,22.375229 11.666667,24.833432 11.249314,26.875293 9.7489174,28.375406 7.2487101,28.938023 5.8110908,29.187761 3.5015518,28.687272 2.9389708,27.125342 2.3764458,25.937233 2.5090418,22.052715 6.3807582,22.39092 6.5057198,19.827857 6.1963643,7.374972 6.1963643,7.374972 z"
                                                  Fill="Transparent"
                                                  RenderTransformOrigin="0.5,0.5"
                                                  Stretch="Fill"
                                                  Stroke="{DynamicResource MainColorBrush}"
                                                  StrokeThickness="2" />

                                        </Border>
                                    </Grid>

                                    <ProgressBar x:Name="TitleProgress"
                                                 Grid.Column="0"
                                                 Grid.ColumnSpan="7"
                                                 Height="30"
                                                 VerticalAlignment="Top"
                                                 Maximum="{Binding ElementName=sliderProgress,
                                                                   Path=Maximum}"
                                                 Style="{StaticResource TitleProgressStyle}"
                                                 Value="{Binding ElementName=sliderProgress,
                                                                 Path=Value}" />

                                    <ToggleButton x:Name="MusicPlayButton"
                                                  Grid.RowSpan="1"
                                                  Grid.Column="1"
                                                  Margin="1.166,2.5,3.833,2.5"
                                                  Click="MusicPlayButton_Click"
                                                  IsChecked="{Binding ElementName=BottomPlayBtn,
                                                                      Path=IsChecked}"
                                                  Style="{StaticResource playbtn}"
                                                  ToolTip="{Binding ElementName=TaskBarPlayBtn,
                                                                    Path=Description,
                                                                    Mode=TwoWay}" />

                                    <Button x:Name="MusicnextButton"
                                            Grid.Column="2"
                                            Margin="2.5"
                                            Click="MusicnextButton_Click"
                                            Style="{StaticResource nextbtn}"
                                            ToolTip="播放下一首" />
                                    <!--  标题栏  -->
                                    <Grid x:Name="TitleGrid"
                                          Grid.Column="3"
                                          Grid.ColumnSpan="2"
                                          Margin="0"
                                          Background="Transparent"
                                          MouseDown="Title_Move"
                                          MouseLeftButtonDown="TitleGrid_MouseLeftButtonDown"
                                          WindowChrome.IsHitTestVisibleInChrome="False">

                                        <TextBlock Width="Auto"
                                                   Margin="3,1"
                                                   VerticalAlignment="Center"
                                                   Background="Transparent"
                                                   FontSize="15"
                                                   FontWeight="Bold"
                                                   Foreground="{DynamicResource MainColorBrush}"
                                                   Text="{Binding Title,
                                                                  ElementName=MainWindow}"
                                                   TextTrimming="WordEllipsis" />

                                    </Grid>

                                    <ToggleButton Name="volbtn"
                                                  Grid.Column="5"
                                                  IsChecked="{Binding ElementName=volbtnpopup,
                                                                      Path=IsOpen}"
                                                  IsTabStop="False"
                                                  MouseWheel="volbtn_MouseWheel"
                                                  Template="{StaticResource VolBtnControlTemplate}"
                                                  ToolTip="{Binding ElementName=voltxt,
                                                                    Path=Text,
                                                                    Converter={StaticResource volbtntooltipConverter}}"
                                                  ToolTipService.InitialShowDelay="100" />

                                    <!--  音量  面板 popup  -->
                                    <Popup Name="volbtnpopup"
                                           Grid.Column="5"
                                           Grid.ColumnSpan="2"
                                           Width="220"
                                           Height="220"
                                           Margin="0,0,-15,-40"
                                           AllowsTransparency="True"
                                           Placement="MousePoint"
                                           StaysOpen="False"
                                           VerticalOffset="30">
                                        <Grid>

                                            <Border Background="{DynamicResource ResourceKey=MainColorBrush}" Opacity="0.6">
                                                <Border.Effect>
                                                    <!--<DropShadowEffect ShadowDepth="0" Color="{DynamicResource ResourceKey=MainColor }" BlurRadius="10" />-->
                                                    <BlurEffect Radius="15" />
                                                </Border.Effect>
                                            </Border>
                                            <Border Margin="0"
                                                    BorderBrush="{DynamicResource ResourceKey=MainColorBrush}"
                                                    BorderThickness="1">
                                                <Border.Effect>
                                                    <!--<DropShadowEffect ShadowDepth="0" Color="{DynamicResource ResourceKey=MainColor }" BlurRadius="10" />-->
                                                    <DropShadowEffect BlurRadius="15"
                                                                      ShadowDepth="0"
                                                                      Color="{DynamicResource ResourceKey=MainColor}" />
                                                </Border.Effect>
                                            </Border>
                                            <Border Margin="5">
                                                <StackPanel>
                                                    <TextBlock Margin="5"
                                                               MouseWheel="volbtn_MouseWheel"
                                                               Text="播放器音量：" />
                                                    <StackPanel MouseWheel="volbtn_MouseWheel" Orientation="Horizontal">
                                                        <Slider x:Name="volslider"
                                                                Width="124"
                                                                Margin="5"
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                LargeChange="0.05"
                                                                Maximum="1"
                                                                Minimum="0"
                                                                SmallChange="0.02"
                                                                ToolTip="双击静音"
                                                                Value="{Binding Volume,
                                                                                ElementName=MusicPlayer}" />
                                                        <TextBlock x:Name="voltxt"
                                                                   Margin="5"
                                                                   VerticalAlignment="Center"
                                                                   MouseLeftButtonDown="voltxt_MouseLeftButtonDown"
                                                                   Text="{Binding Value,
                                                                                  ElementName=volslider,
                                                                                  Converter={StaticResource volto100Converter}}"
                                                                   TextAlignment="Center" />
                                                        <CheckBox Name="exevolchecked"
                                                                  Margin="5"
                                                                  VerticalAlignment="Center"
                                                                  Content="静音"
                                                                  IsChecked="{Binding IsMuted,
                                                                                      ElementName=MusicPlayer}"
                                                                  ToolTipService.BetweenShowDelay="100"
                                                                  ToolTipService.ShowDuration="10000" />
                                                    </StackPanel>


                                                    <TextBlock Margin="5"
                                                               MouseWheel="systemvol_MosueWheel"
                                                               Text="系统音量：" />
                                                    <StackPanel MouseWheel="systemvol_MosueWheel" Orientation="Horizontal">
                                                        <Slider Name="systemvolslider"
                                                                Width="124"
                                                                Margin="5"
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                LargeChange="0.05"
                                                                Maximum="1"
                                                                Minimum="0"
                                                                SmallChange="0.02"
                                                                ValueChanged="systemvolslider_ValueChanged" />
                                                        <TextBlock Margin="5"
                                                                   VerticalAlignment="Center"
                                                                   Text="{Binding Value,
                                                                                  ElementName=systemvolslider,
                                                                                  Converter={StaticResource volto100Converter}}"
                                                                   TextAlignment="Center" />
                                                        <CheckBox Name="sysvolchecked"
                                                                  Margin="5"
                                                                  VerticalAlignment="Center"
                                                                  Click="sysvol_Click"
                                                                  Content="静音"
                                                                  ToolTipService.BetweenShowDelay="100"
                                                                  ToolTipService.ShowDuration="10000" />
                                                    </StackPanel>

                                                    <TextBlock Margin="5" Text="平衡：" />
                                                    <StackPanel Orientation="Horizontal">
                                                        <Slider Name="balance"
                                                                Width="124"
                                                                Margin="5"
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                LargeChange="0.2"
                                                                Maximum="1"
                                                                Minimum="-1"
                                                                SmallChange="0.1"
                                                                Value="{Binding Balance,
                                                                                ElementName=MusicPlayer,
                                                                                Mode=TwoWay}" />
                                                        <TextBlock Margin="5"
                                                                   VerticalAlignment="Center"
                                                                   Text="{Binding Value,
                                                                                  ElementName=balance,
                                                                                  StringFormat={}{0:F1}}"
                                                                   TextAlignment="Center" />
                                                        <TextBlock Margin="5"
                                                                   VerticalAlignment="Center"
                                                                   Cursor="Hand"
                                                                   MouseDown="Balance_MouseDown"
                                                                   Text="重置"
                                                                   TextAlignment="Center"
                                                                   TextDecorations="Underline" />
                                                    </StackPanel>

                                                    <TextBlock Margin="5" Text="速度：" />
                                                    <StackPanel Orientation="Horizontal">
                                                        <Slider Name="speed"
                                                                Width="124"
                                                                Margin="5"
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                LargeChange="3"
                                                                Maximum="5"
                                                                Minimum="0"
                                                                SmallChange="1"
                                                                Value="{Binding ElementName=MusicPlayer,
                                                                                Path=SpeedRatio,
                                                                                Mode=TwoWay}" />
                                                        <TextBlock Margin="5"
                                                                   VerticalAlignment="Center"
                                                                   Text="{Binding Value,
                                                                                  ElementName=speed,
                                                                                  StringFormat={}{0:F1}}"
                                                                   TextAlignment="Center" />
                                                        <TextBlock Margin="5"
                                                                   VerticalAlignment="Center"
                                                                   Cursor="Hand"
                                                                   MouseDown="Speed_MouseDown"
                                                                   Text="重置"
                                                                   TextAlignment="Center"
                                                                   TextDecorations="Underline" />
                                                    </StackPanel>
                                                </StackPanel>

                                            </Border>

                                        </Grid>
                                    </Popup>

                                    <StackPanel Grid.Column="6" Orientation="Horizontal">
                                        <StackPanel.Resources>
                                            <DropShadowEffect x:Key="closeeffect"
                                                              BlurRadius="5"
                                                              Opacity="1"
                                                              ShadowDepth="0"
                                                              Color="{DynamicResource MainColor}" />
                                        </StackPanel.Resources>

                                        <ToggleButton x:Name="btn_setting"
                                                      Width="30"
                                                      Height="30"
                                                      Margin="0"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      Background="Transparent"
                                                      Content="设置"
                                                      Focusable="False"
                                                      Foreground="#FF575757"
                                                      IsChecked="{Binding ElementName=popup_setting,
                                                                          Path=IsOpen}"
                                                      Template="{StaticResource btn_settingControlTemplate}"
                                                      ToolTip="设置" />

                                        <Button Width="35"
                                                Height="30"
                                                Command="{x:Static SystemCommands.MinimizeWindowCommand}"
                                                Effect="{StaticResource closeeffect}"
                                                Focusable="False"
                                                Template="{DynamicResource btn_min}"
                                                ToolTip="最小化" />
                                        <Button Width="35"
                                                Command="{x:Static SystemCommands.MaximizeWindowCommand}"
                                                Effect="{StaticResource closeeffect}"
                                                Focusable="False"
                                                Template="{DynamicResource btn_max}"
                                                ToolTip="最大化/还原" />
                                        <Button Width="35"
                                                Command="{x:Static SystemCommands.CloseWindowCommand}"
                                                Effect="{StaticResource closeeffect}"
                                                Focusable="False"
                                                Template="{DynamicResource btn_close}"
                                                ToolTip="关闭" />
                                    </StackPanel>

                                </Grid>

                                <ContentPresenter Grid.Row="1"
                                                  Margin="{TemplateBinding Padding}"
                                                  Content="{TemplateBinding Content}" />

                            </Grid>
                        </Grid>
                    </AdornerDecorator>

                </Border>
            </Border>


        </ControlTemplate>

    </Window.Template>

    <Grid>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="VisualStateGroup" />
        </VisualStateManager.VisualStateGroups>

        <Grid x:Name="MainGrid" Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="230*" />
                <ColumnDefinition Width="489*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="60" />
            </Grid.RowDefinitions>


            <Popup x:Name="popup_setting"
                   Grid.RowSpan="2"
                   Grid.ColumnSpan="2"
                   AllowsTransparency="True"
                   Placement="MousePoint"
                   StaysOpen="False"
                   Style="{x:Null}"
                   VerticalOffset="30">
                <Grid>
                    <Border Background="{DynamicResource ResourceKey=MainColorBrush}" Opacity="0.6">
                        <Border.Effect>
                            <!--<DropShadowEffect ShadowDepth="0" Color="{DynamicResource ResourceKey=MainColor }" BlurRadius="10" />-->
                            <BlurEffect Radius="15" />
                        </Border.Effect>
                    </Border>
                    <Border Margin="0"
                            BorderBrush="{DynamicResource ResourceKey=MainColorBrush}"
                            BorderThickness="1">
                        <Border.Effect>
                            <!--<DropShadowEffect ShadowDepth="0" Color="{DynamicResource ResourceKey=MainColor }" BlurRadius="10" />-->
                            <DropShadowEffect BlurRadius="15"
                                              ShadowDepth="0"
                                              Color="{DynamicResource ResourceKey=MainColor}" />
                        </Border.Effect>
                    </Border>
                    <Border>
                        <Grid>
                            <StackPanel Orientation="Horizontal">
                                <Grid Width="220" HorizontalAlignment="Left">

                                    <StackPanel>
                                        <StackPanel Height="30"
                                                    Margin="24,10,15,0"
                                                    Orientation="Horizontal">
                                            <TextBlock VerticalAlignment="Center" Text="当前主题颜色：" />
                                            <Rectangle x:Name="nowcolor_rect"
                                                       Width="30"
                                                       Height="30"
                                                       Margin="20,0,0,0"
                                                       Fill="{DynamicResource MainColorBrush}"
                                                       Stroke="White"
                                                       StrokeThickness="2" />
                                        </StackPanel>
                                        <TextBlock Margin="24,5,15,5"
                                                   VerticalAlignment="Center"
                                                   Text="选择主题颜色：" />

                                        <WrapPanel x:Name="Rect_Parent"
                                                   Margin="10,3"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center">
                                            <WrapPanel.Resources>

                                                <Style TargetType="{x:Type Rectangle}">
                                                    <Setter Property="HorizontalAlignment" Value="Center" />
                                                    <Setter Property="VerticalAlignment" Value="Center" />
                                                    <Setter Property="StrokeThickness" Value="0" />
                                                    <Setter Property="Stroke" Value="White" />
                                                    <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />

                                                    <Setter Property="RenderTransform">
                                                        <Setter.Value>
                                                            <RotateTransform />
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>

                                                        <EventTrigger RoutedEvent="UIElement.MouseDown">
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <DoubleAnimation AutoReverse="True"
                                                                                     Duration="0:0:0.5"
                                                                                     Storyboard.TargetProperty="StrokeThickness"
                                                                                     To="5" />
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </EventTrigger>
                                                        <EventTrigger RoutedEvent="UIElement.MouseEnter">
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <DoubleAnimation AutoReverse="True"
                                                                                     Duration="0:0:0.7"
                                                                                     From="0"
                                                                                     Storyboard.TargetProperty="RenderTransform.Angle"
                                                                                     To="360" />
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </EventTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </WrapPanel.Resources>
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FFA4C400" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF60A917" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF008A00" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF00ABA9" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF1BA1E2" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF0050EF" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF6A00FF" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FFAA00FF" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FFF472D0" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FFD80073" />

                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FFA20025" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FFE51400" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FFFA6800" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FFF0A30A" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FFE3C800" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF825A2C" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF6D8764" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF647687" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF76608A" />
                                            <Rectangle Width="30"
                                                       Height="30"
                                                       Margin="5"
                                                       Fill="#FF87794E" />
                                        </WrapPanel>
                                        <Border Height="120" Margin="20,5,20,5">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="19*" />
                                                    <ColumnDefinition Width="71*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="30*" />
                                                    <RowDefinition Height="30*" />
                                                    <RowDefinition Height="30*" />
                                                    <RowDefinition Height="30*" />
                                                    <RowDefinition Height="30*" />
                                                </Grid.RowDefinitions>
                                                <TextBlock Grid.RowSpan="1"
                                                           Grid.ColumnSpan="2"
                                                           Margin="0,5"
                                                           Text="微调主题颜色 （R,G,B,A）：" />

                                                <TextBlock Grid.Row="1"
                                                           Height="15.24"
                                                           Margin="0,4.38"
                                                           VerticalAlignment="Center"
                                                           Text="{Binding Value,
                                                                          ElementName=sliderR,
                                                                          StringFormat=R: \{0\}}" />
                                                <Slider x:Name="sliderR"
                                                        Grid.Row="1"
                                                        Grid.Column="1"
                                                        Height="18"
                                                        Margin="0,3"
                                                        VerticalAlignment="Center"
                                                        AutoToolTipPlacement="TopLeft"
                                                        IsSnapToTickEnabled="True"
                                                        LargeChange="10"
                                                        Maximum="255" />

                                                <TextBlock Grid.Row="2"
                                                           Height="15.24"
                                                           Margin="0,4.38"
                                                           VerticalAlignment="Center"
                                                           Text="{Binding Value,
                                                                          ElementName=sliderG,
                                                                          StringFormat=G: \{0:\}}" />
                                                <Slider x:Name="sliderG"
                                                        Grid.Row="2"
                                                        Grid.Column="1"
                                                        Height="18"
                                                        Margin="0,3"
                                                        VerticalAlignment="Center"
                                                        AutoToolTipPlacement="TopLeft"
                                                        IsSnapToTickEnabled="True"
                                                        LargeChange="10"
                                                        Maximum="255" />

                                                <TextBlock Grid.Row="3"
                                                           Height="15.24"
                                                           Margin="0,4.38"
                                                           VerticalAlignment="Center"
                                                           Text="{Binding Value,
                                                                          ElementName=sliderB,
                                                                          StringFormat=B: \{0:\}}" />
                                                <Slider x:Name="sliderB"
                                                        Grid.Row="3"
                                                        Grid.Column="1"
                                                        Height="18"
                                                        Margin="0,3"
                                                        VerticalAlignment="Center"
                                                        AutoToolTipPlacement="TopLeft"
                                                        IsSnapToTickEnabled="True"
                                                        LargeChange="10"
                                                        Maximum="255" />

                                                <TextBlock Grid.Row="4"
                                                           Height="15.24"
                                                           Margin="0,4.38"
                                                           VerticalAlignment="Center"
                                                           Text="{Binding Value,
                                                                          ElementName=sliderA,
                                                                          StringFormat=A: \{0:\}}" />
                                                <Slider x:Name="sliderA"
                                                        Grid.Row="4"
                                                        Grid.Column="1"
                                                        Height="18"
                                                        Margin="0,3"
                                                        VerticalAlignment="Center"
                                                        AutoToolTipPlacement="TopLeft"
                                                        IsSnapToTickEnabled="True"
                                                        LargeChange="10"
                                                        Maximum="255" />

                                            </Grid>
                                        </Border>

                                    </StackPanel>

                                </Grid>

                                <Grid Width="220">
                                    <StackPanel Margin="5,10">
                                        <Border Height="70" Margin="10,5">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="0.8*" />
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="37*" />
                                                    <ColumnDefinition Width="163*" />
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.ColumnSpan="2"
                                                           VerticalAlignment="Center"
                                                           Text="主程序窗口的长和宽"
                                                           ToolTipService.ShowDuration="10000" />

                                                <TextBlock Grid.Column="1"
                                                           Width="89"
                                                           Margin="74,2.38,0,2.38"
                                                           HorizontalAlignment="Left"
                                                           VerticalAlignment="Center">
                                                    <TextBlock.Text>
                                                        <MultiBinding StringFormat="( {0:N0} x {1:N0} )：">
                                                            <Binding ElementName="SliderWidth" Path="Value" />
                                                            <Binding ElementName="SliderHeight" Path="Value" />
                                                        </MultiBinding>
                                                    </TextBlock.Text>
                                                </TextBlock>


                                                <TextBlock Grid.Row="1"
                                                           VerticalAlignment="Center"
                                                           Text="长度:" />
                                                <Slider x:Name="SliderWidth"
                                                        Grid.Row="1"
                                                        Grid.Column="1"
                                                        VerticalAlignment="Center"
                                                        AutoToolTipPlacement="TopLeft"
                                                        IsSnapToTickEnabled="True"
                                                        LargeChange="10"
                                                        SmallChange="1"
                                                        Value="{Binding Width,
                                                                        ElementName=MainWindow}" />
                                                <TextBlock Grid.Row="2"
                                                           VerticalAlignment="Center"
                                                           Text="宽度:" />
                                                <Slider x:Name="SliderHeight"
                                                        Grid.Row="2"
                                                        Grid.Column="1"
                                                        VerticalAlignment="Center"
                                                        AutoToolTipPlacement="TopLeft"
                                                        LargeChange="10"
                                                        SmallChange="1"
                                                        Value="{Binding Height,
                                                                        ElementName=MainWindow}" />
                                            </Grid>

                                        </Border>
                                        <Border Height="90" Margin="10,5">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="0.8*" />
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="28*" />
                                                    <ColumnDefinition Width="67*" />
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.ColumnSpan="2"
                                                           Height="15.24"
                                                           Margin="0,2.38,80.666,2.38"
                                                           VerticalAlignment="Center"
                                                           Cursor="Hand"
                                                           MouseDown="ChangeBackImg_MouseDown"
                                                           Text="主程序窗口背景设置"
                                                           TextDecorations="Underline"
                                                           ToolTip="点击更换背景图片" />
                                                <TextBlock Grid.ColumnSpan="2"
                                                           Height="15.24"
                                                           Margin="162,2.38,0,2.38"
                                                           VerticalAlignment="Center"
                                                           Cursor="Hand"
                                                           MouseDown="ResetBackImage_MouseDown"
                                                           Text="重置"
                                                           TextDecorations="Underline"
                                                           ToolTip="点击更换背景图片" />

                                                <TextBlock x:Name="ChangeBackImg"
                                                           Grid.Column="1"
                                                           Height="15.24"
                                                           Margin="53.334,2.38,0,2.38"
                                                           VerticalAlignment="Center"
                                                           Visibility="Hidden">
                                                    <TextBlock.Text>
                                                        <MultiBinding StringFormat="( {0:F1} ; {1:F2} )：">
                                                            <Binding ElementName="Backgeffect" Path="Value" />
                                                            <Binding ElementName="Backgopacity" Path="Value" />
                                                        </MultiBinding>
                                                    </TextBlock.Text>
                                                </TextBlock>

                                                <TextBlock Grid.Row="1"
                                                           Height="15.24"
                                                           Margin="0,4.88"
                                                           VerticalAlignment="Center"
                                                           Text="高斯模糊:" />
                                                <Slider x:Name="Backgeffect"
                                                        Grid.Row="1"
                                                        Grid.Column="1"
                                                        Height="18"
                                                        Margin="0,3.5"
                                                        VerticalAlignment="Center"
                                                        AutoToolTipPlacement="TopLeft"
                                                        AutoToolTipPrecision="1"
                                                        IsSnapToTickEnabled="True"
                                                        LargeChange="10"
                                                        Maximum="30"
                                                        SmallChange="0.5"
                                                        TickFrequency="0.5"
                                                        Value="0" />
                                                <TextBlock Grid.Row="2"
                                                           Height="15.24"
                                                           Margin="0,4.88"
                                                           VerticalAlignment="Center"
                                                           Text="透明度:" />
                                                <Slider x:Name="Backgopacity"
                                                        Grid.Row="2"
                                                        Grid.Column="1"
                                                        Height="18"
                                                        Margin="0,3.5"
                                                        VerticalAlignment="Center"
                                                        AutoToolTipPlacement="TopLeft"
                                                        AutoToolTipPrecision="2"
                                                        Maximum="1"
                                                        Value="0.8" />
                                                <TextBlock Name="MusicPathLabel"
                                                           Grid.Row="3"
                                                           VerticalAlignment="Center"
                                                           Cursor="Hand"
                                                           MouseDown="MusicPathLabel_MouseDown"
                                                           Text="音乐路径:"
                                                           TextDecorations="Underline"
                                                           ToolTip="点击更换音乐路径并重新加载" />
                                                <TextBlock Name="MusicPathTextBlock"
                                                           Grid.Row="3"
                                                           Grid.Column="1"
                                                           Margin="2.88,0"
                                                           VerticalAlignment="Center"
                                                           Text="NULL"
                                                           ToolTip="{Binding ElementName=MusicPathTextBlock,
                                                                             Path=Text}" />
                                            </Grid>

                                        </Border>
                                    </StackPanel>
                                </Grid>

                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
            </Popup>

            <TextBlock x:Name="LrcTextBlock"
                       Grid.ColumnSpan="2"
                       Height="30"
                       Margin="22,3,315,0"
                       VerticalAlignment="Top"
                       FontSize="16"
                       Foreground="{DynamicResource MainColorBrush}"
                       TextAlignment="Left"
                       TextTrimming="CharacterEllipsis"
                       TextWrapping="NoWrap"
                       Visibility="Collapsed">
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="6"
                                      Opacity="0.6"
                                      ShadowDepth="2"
                                      Color="{DynamicResource {x:Static SystemColors.GrayTextColorKey}}" />
                </TextBlock.Effect>
            </TextBlock>

            <MediaElement x:Name="MusicPlayer"
                          Height="0"
                          VerticalAlignment="Top"
                          d:IsHidden="True"
                          LoadedBehavior="Manual"
                          MediaEnded="MusicPlayer_MediaEnded"
                          MediaOpened="MusicPlayer_MediaOpened"
                          Volume="0.3" />


            <local:LrcPanel x:Name="m_LrcPanel" Margin="8,33,2,17" />

            <Image Name="MusicImage"
                   Margin="22,31,22,10"
                   Source="Default_MusciImage.png"
                   Stretch="Uniform">
                <Image.Effect>
                    <DropShadowEffect BlurRadius="8"
                                      Opacity="0.8"
                                      ShadowDepth="7"
                                      Color="{DynamicResource {x:Static SystemColors.GrayTextColorKey}}" />
                </Image.Effect>
            </Image>

            <ListBox x:Name="mylistbox"
                     Grid.RowSpan="2"
                     Grid.Column="1"
                     Margin="7,33,15,17" />

            <Border Grid.Column="1"
                    Width="111"
                    Height="25"
                    Margin="0,9,20,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Background="Transparent">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="2" ShadowDepth="0" />
                </Border.Effect>
                <Grid Margin="0,-7,0,7">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="31*" />
                        <ColumnDefinition Width="10*" />
                        <ColumnDefinition Width="31*" />
                        <ColumnDefinition Width="8*" />
                        <ColumnDefinition Width="31*" />
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="playingitem"
                               Grid.Column="0"
                               Height="16"
                               Margin="0,0,0,5"
                               VerticalAlignment="Bottom"
                               Foreground="{DynamicResource MainColorBrush}"
                               Text="0"
                               TextAlignment="Right"
                               ToolTip="正在播放的项目" />
                    <TextBlock Grid.Column="1"
                               Width="10"
                               Height="16"
                               Margin="0,4,0,5"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center"
                               Foreground="{DynamicResource MainColorBrush}"
                               Text="/"
                               TextAlignment="Right" />
                    <TextBlock x:Name="txtSelectedIndex"
                               Grid.Column="2"
                               Height="16"
                               Margin="0,0,0,5"
                               VerticalAlignment="Bottom"
                               Foreground="{DynamicResource MainColorBrush}"
                               Text="{Binding SelectedIndex,
                                              Converter={StaticResource valueplusoneConverter},
                                              ElementName=mylistbox,
                                              TargetNullValue=0}"
                               TextAlignment="Right"
                               ToolTip="当前选择的项" />
                    <TextBlock Grid.Column="2"
                               Grid.ColumnSpan="2"
                               Width="10"
                               Height="16"
                               Margin="0,4,0,5"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center"
                               Foreground="{DynamicResource MainColorBrush}"
                               Text="/"
                               TextAlignment="Right" />
                    <TextBlock x:Name="txtCount"
                               Grid.Column="4"
                               Height="16"
                               Margin="0,0,0,5"
                               VerticalAlignment="Bottom"
                               Foreground="{DynamicResource MainColorBrush}"
                               Text="{Binding Items.Count,
                                              ElementName=mylistbox}"
                               TextAlignment="Right"
                               ToolTip="项目总数" />

                </Grid>

            </Border>

            <TextBox Name="SearchTextBox"
                     Grid.Column="1"
                     Width="162"
                     Height="22"
                     Margin="0,4,136,0"
                     HorizontalAlignment="Right"
                     VerticalAlignment="Top"
                     VerticalContentAlignment="Center"
                     CaretBrush="{DynamicResource MainColorBrush}"
                     FontSize="14"
                     Foreground="{DynamicResource MainColorBrush}"
                     SelectionBrush="#FFFCFEFF"
                     Template="{StaticResource SearchTextBoxControlTemplate}"
                     TextElement.FontWeight="Bold"
                     TextWrapping="NoWrap" />

            <Grid Name="InfoGrid"
                  Grid.Row="1"
                  Grid.RowSpan="1"
                  MinWidth="200"
                  MinHeight="200"
                  MaxHeight="200"
                  Margin="10,0,10,10">

                <Grid x:Name="MusicDetailTooltip"
                      DataContext="{Binding ElementName=mylistbox,
                                            Path=SelectedItem}"
                      TextBlock.FontSize="13"
                      TextBlock.Foreground="{DynamicResource MainColorBrush}">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="2*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <TextBlock Grid.ColumnSpan="2"
                               Margin="0"
                               VerticalAlignment="Center"
                               FontSize="15"
                               FontWeight="Bold"
                               Text="{Binding MusicTitle,
                                              FallbackValue=我的音乐我做主}"
                               TextAlignment="Center"
                               TextTrimming="CharacterEllipsis"
                               TextWrapping="NoWrap"
                               ToolTip="{Binding RelativeSource={RelativeSource Self},
                                                 Path=Text}">
                        <TextBlock.Effect>
                            <DropShadowEffect BlurRadius="6"
                                              Opacity="0.8"
                                              ShadowDepth="2" />
                        </TextBlock.Effect>
                    </TextBlock>

                    <TextBlock Grid.Row="1"
                               Style="{StaticResource MainSongInfoGrid1}"
                               Text="歌手：" />
                    <TextBlock Grid.Row="1"
                               Grid.Column="1"
                               HorizontalAlignment="Left"
                               Style="{StaticResource MainSongInfoGrid2}"
                               ToolTip="查询该歌手所有歌曲">
                        <Hyperlink Click="HyperlinkSongerSearch_Click" Foreground="{DynamicResource MainColorBrush}">
                            <Run Text="{Binding MusicAuthors}" />
                        </Hyperlink>
                    </TextBlock>
                    <TextBlock Grid.Row="2"
                               Style="{StaticResource MainSongInfoGrid1}"
                               Text="时长：" />
                    <TextBlock Grid.Row="2"
                               Grid.Column="1"
                               Style="{StaticResource MainSongInfoGrid2}"
                               Text="{Binding MusicLength}" />
                    <TextBlock Grid.Row="3"
                               Style="{StaticResource MainSongInfoGrid1}"
                               Text="专辑：" />
                    <TextBlock Grid.Row="3"
                               Grid.Column="1"
                               Style="{StaticResource MainSongInfoGrid2}"
                               Text="{Binding MusicAlbum}" />
                    <TextBlock Grid.Row="4"
                               Style="{StaticResource MainSongInfoGrid1}"
                               Text="年代：" />
                    <TextBlock Grid.Row="4"
                               Grid.Column="1"
                               Style="{StaticResource MainSongInfoGrid2}"
                               Text="{Binding MusicYear}" />
                    <TextBlock Grid.Row="5"
                               Style="{StaticResource MainSongInfoGrid1}"
                               Text="风格：" />
                    <TextBlock Grid.Row="5"
                               Grid.Column="1"
                               Style="{StaticResource MainSongInfoGrid2}"
                               Text="{Binding MusicGenre}" />
                    <TextBlock Grid.Row="6"
                               Style="{StaticResource MainSongInfoGrid1}"
                               Text="文件大小：" />
                    <TextBlock Grid.Row="6"
                               Grid.Column="1"
                               Style="{StaticResource MainSongInfoGrid2}"
                               Text="{Binding MusicSize}" />
                    <TextBlock Grid.Row="7"
                               Style="{StaticResource MainSongInfoGrid1}"
                               Text="文件位置：" />
                    <TextBlock Name="Info_SongLoc"
                               Grid.Row="7"
                               Grid.Column="1"
                               Margin="0,5"
                               HorizontalAlignment="Left"
                               Style="{StaticResource MainSongInfoGrid2}"
                               TextAlignment="Left"
                               TextTrimming="CharacterEllipsis"
                               TextWrapping="NoWrap"
                               ToolTip="{Binding RelativeSource={RelativeSource Self},
                                                 Path=Text}">
                        <Hyperlink Click="MenuItemMusicLocation_Click" Foreground="{DynamicResource MainColorBrush}">
                            <Run Text="{Binding MusicLoc}" />
                        </Hyperlink>
                    </TextBlock>

                </Grid>

            </Grid>

            <!--  下方播放放按钮和进度条  -->
            <Grid Grid.Row="2" Grid.ColumnSpan="2">
                <Grid.ColumnDefinitions>

                    <ColumnDefinition Width="60" />
                    <ColumnDefinition Width="150" />
                    <ColumnDefinition Width="60" />
                    <ColumnDefinition />
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="40" />

                </Grid.ColumnDefinitions>
                <Border Margin="1,1,1,1"
                        Background="Transparent"
                        MouseLeftButtonDown="resizeGrip_MouseLeftButtonDown">
                    <Image Name="SmallMusicImage"
                           Margin="1,1,1,2"
                           Source="{Binding ElementName=MusicImage,
                                            Path=Source}" />
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="8"
                                          Opacity="0.8"
                                          ShadowDepth="7"
                                          Color="{DynamicResource {x:Static SystemColors.GrayTextColorKey}}" />
                    </Border.Effect>
                </Border>

                <Grid Grid.Column="1"
                      Margin="5,0,0,0"
                      Background="Transparent"
                      MouseDown="playingitem_MouseDown">
                    <Grid.Effect>
                        <DropShadowEffect BlurRadius="8"
                                          Opacity="0.8"
                                          ShadowDepth="7"
                                          Color="{DynamicResource {x:Static SystemColors.GrayTextColorKey}}" />
                    </Grid.Effect>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <TextBlock Name="textTitle"
                               Margin="5,5,0,0"
                               VerticalAlignment="Center"
                               FontSize="14"
                               Foreground="{DynamicResource MainColorBrush}"
                               Text="我的音乐我做主"
                               TextTrimming="CharacterEllipsis"
                               ToolTip="{Binding ElementName=textTitle,
                                                 Path=Text}" />
                    <TextBlock Name="textSonger"
                               Grid.Row="1"
                               Margin="5,0,0,7"
                               VerticalAlignment="Center"
                               FontSize="13"
                               Foreground="{DynamicResource MainColorBrush}"
                               Text="我爱霉霉"
                               ToolTip="{Binding ElementName=textSonger,
                                                 Path=Text}" />

                </Grid>

                <Grid Grid.Column="2" Margin="0">
                    <Ellipse Margin="7"
                             Opacity="0.3"
                             Stroke="{DynamicResource MainColorBrush}"
                             StrokeThickness="3">
                        <Ellipse.Effect>
                            <DropShadowEffect BlurRadius="10"
                                              ShadowDepth="0"
                                              Color="{DynamicResource MainColor}" />
                        </Ellipse.Effect>
                    </Ellipse>
                    <Ellipse Name="circleprogress"
                             Margin="7"
                             RenderTransformOrigin="0.5,0.5"
                             Stroke="{DynamicResource MainColorBrush}"
                             StrokeDashArray="0,1000"
                             StrokeDashOffset="0.1"
                             StrokeThickness="3">
                        <Ellipse.RenderTransform>
                            <TransformGroup>
                                <RotateTransform Angle="-90" />
                                <TranslateTransform />
                            </TransformGroup>
                        </Ellipse.RenderTransform>
                        <Ellipse.Effect>
                            <DropShadowEffect BlurRadius="10"
                                              ShadowDepth="0"
                                              Color="{DynamicResource MainColor}" />
                        </Ellipse.Effect>
                    </Ellipse>

                    <ToggleButton Name="BottomPlayBtn"
                                  Click="MusicPlayButton_Click"
                                  Style="{StaticResource playbtnBottom}" />
                </Grid>

                <Canvas Name="canvas_SkipTime"
                        Grid.Column="3"
                        Visibility="Collapsed">
                    <TextBlock Name="textblock_SkipTime"
                               Grid.Column="2"
                               Canvas.Left="0"
                               Canvas.Top="2"
                               Width="auto"
                               Height="15"
                               VerticalAlignment="Top"
                               FontWeight="Bold"
                               Foreground="{DynamicResource MainColorBrush}"
                               Text="01:30"
                               TextAlignment="Center" />
                </Canvas>

                <Slider Name="sliderProgress"
                        Grid.Column="3"
                        Height="20"
                        Margin="10,21.8,10,18"
                        VerticalAlignment="Center"
                        AutoToolTipPlacement="None"
                        Cursor="Hand"
                        MouseEnter="sliderProgress_MouseEnter"
                        MouseLeave="sliderProgress_MouseLeave"
                        MouseMove="sliderProgress_MouseMove"
                        ValueChanged="sliderProgress_ValueChanged" />


                <TextBlock Name="textMusicPos"
                           Grid.Column="4"
                           Margin="5,20"
                           VerticalAlignment="Center"
                           FontFamily="Yu Gothic UI Semibold"
                           FontSize="14"
                           Foreground="{DynamicResource MainColorBrush}"
                           Text="0:00 / 0:00">
                    <TextBlock.Effect>
                        <DropShadowEffect BlurRadius="10"
                                          Opacity="0.6"
                                          ShadowDepth="0"
                                          Color="{DynamicResource MainColor}" />
                    </TextBlock.Effect>
                </TextBlock>



            </Grid>

            <ResizeGrip x:Name="resizeGrip"
                        Grid.Row="2"
                        Grid.Column="1"
                        Width="17"
                        Height="17"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        Cursor="SizeAll"
                        ToolTip="拖动窗体" />


        </Grid>

    </Grid>


</Window>
